# 分布式系统的抽象与实现技术

**By Loserfromlazy**



> 本文是MIT的分布式系统课程6.824的学习笔记包括课程的lab的实现。学习的目的主要是扎实基础，能更加深刻的理解分布式系统。
>
> **未经授权请勿转载本笔记。创作不易，请尊重作者，违者必究！！！**
>
> 关于学习过程中的参考资料请见本文的参考资料章节，该章节放在了最后。

# 一、概述

> 已完成，待整理

## 1.1 概述

什么是分布式系统？实际上分布式系统是协调提供服务的一组计算机就是分布式系统。为什么我们需要分布式系统呢？主要有四方面原因：

- 可以通过并行计算获得更高的性能

- 可以通过复制来提供容错

  比如两台计算机做主从复制

- 匹配物理设备的分布

  比如在纽约有一台服务器A、伦敦有一台服务器B，我们需要协调这种物理位置的分布。

- 通过隔离来提高安全性

  比如有一些代码并不被信任，但是又需要和它进行交互。所以可以将代码分散在多处运行，这样不同的代码在不同的计算机运行，通过特定的网络协议通信，这样可以限制出错。

实现分布式系统并不容易，主要有以下几个问题或挑战：

- concurrency，并发
- complex interactions，复杂交互
- partial failure，局部错误
- hard to get high performance，很难获得高性能

因为分布式系统有很多部分，所以会遇到并发以及复杂交互带来的问题（比如同步、异步等）。同时由多台计算机组成的分布式系统，可能会有一部分组件在工作，而另一部分组件停止运行，所以局部错误也是其中一大难点。最后一个难点就是分布式系统很难获得高性能，因为设计分布式系统的根本原因通常是为了获得更高的性能，比如说一千台计算机能达到的性能。但是实际上一千台机器到底有多少性能需要小心设计让系统达到预期。

由于分布式系统难点很多，所以我们应该学习如何解决这些难点。

> PS：在设计一个系统时或者面对一个需要解决的问题时，如果可以在一台计算机上解决，而不需要分布式系统，那就应该用一台计算机解决问题。有很多的工作都可以在一台计算机上完成，并且通常比分布式系统简单很多。所以，在选择使用分布式系统解决问题前，你应该要充分尝试别的思路，因为分布式系统会让问题解决变得复杂。

## 1.2 分布式系统的抽象与实现

分布式系统的问题可以抽象成三大类，分别是：

- 存储
- 通信
- 计算

我们抽象的目的是为了隐藏分布式系统的复杂性。比如我们可以提供一些抽象的接口，将分布式系统的特性隐藏在整个系统内，从应用程序的角度来看，整个系统是一个非分布式的系统。我们的最终目的就是希望构建一个接口，它看起来就像一个非分布式存储和计算系统一样，但是实际上又是一个有极高的性能和容错性的分布式系统。

那么我们该如何实现呢？在构建分布式系统中，人们是用了很多工具：

- RPC
- Thread
- concurrency control（并发控制）
- ...

这些都是实现分布式系统的编程工具，也是用来构建分布式系统的工具。

在构建分布式系统的过程中我们还需要几个问题：

- 性能
- 可扩展性
- 容错
- 一致性

下面我们一一来看：

### 1.2.1 分布式系统的可用性

首先我们应该考虑的就是性能

### 1.2.2 分布式系统的一致性

### 1.2.3 分布式系统的可扩展性

### 1.2.4 分布式系统的性能

## 1.6 MapReduce介绍

# 二、go语言的RPC与线程

> 已完成，待整理

> 关于go语言的学习可以参考我的学习笔记[Go语言学习笔记](https://github.com/Loserfromlazy/Code_Career/blob/master/%E9%9D%9EJava%E6%8A%80%E6%9C%AF%E6%A0%88/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.md),我学习go的相关参考资料也在该笔记中。
>
> 本小节主要跟随6.824课程简单整理下Go语言的优点，以及Go语言的RPC和线程



# 三、LAB1——go语言实现MapReduce_Demo

> 已完成，待整理

> 在开始本实验之前最好先完成Go语言的学习，熟悉常用语法,关于go语言的学习可以参考我的学习笔记[Go语言学习笔记](https://github.com/Loserfromlazy/Code_Career/blob/master/%E9%9D%9EJava%E6%8A%80%E6%9C%AF%E6%A0%88/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.md),我学习go的相关参考资料也在该笔记中。
>
> **关于6.824的实验：实验内容一定要自己做，可以看别人的思路，但是内容一定要自己做，不然实验就会没有意义。包括本文中也只会展示我的思路，关于我的实验通过的代码这里也只给出仓库地址。**
>
> 作为第一个lab，我在一开始做的时候也很懵，刚开始也无从下手，而且作为一个Java开发人员，对go的编译器和开发也不是很熟练。所以为了帮助大家快速上手，第一个实验我将从实验环境的搭建、如何编写实验代码、代码如何测试、每一步如何操作并结合官网的要求和论文以及我自己的排坑和学习心得，详细的写一节入门指南，后续的实验就只会提供我个人的实验思路和代码仓库地址。

# 四、分布式存储——GFS



# 参考资料

- [MIT6.824](https://pdos.csail.mit.edu/6.824/schedule.html)这门课可以说是明星课程了，将主流的分布式系统软件讲的浅显易懂。这里给出的是2023年课程的Schedule页面。

- [MIT6.824中英双语字幕](https://www.bilibili.com/video/BV1R7411t71W/?spm_id_from=333.337.search-card.all.click)这个是B站的中英双语字幕的课程视频，课程是2020年的视频，2020年主讲老师是Robert Morris。（我个人很喜欢这个老师）作为写出蠕虫病毒的大神，Robert教授能够一种理论联系实际的方式，将主流的分布式系统软件讲的浅显易懂。推荐学习时尽量看英文字幕，毕竟是机翻，有些地方并不是很准确。

- [MIT6.824的课程翻译](https://github.com/huihongxiao/MIT6.824)非常感谢huihongxiao大神的翻译降低了学习的难度。

- [实验lab1的指导](https://blog.csdn.net/weixin_45938441/article/details/124018485)对于第一次写go和做MIT的实验的同学刚上手可能会懵，我刚开始做实验时就很懵，对go的生疏和对实验的不了解导致上手十分困难，这篇博客的环境搭建和入门指导写的还不错。

  > PS：实验内容一定要自己做，可以看别人的思路，但是内容一定要自己做，不然实验就会没有意义。包括本文中也只会展示我的思路，关于我的实验通过的代码这里也只给出仓库地址。

- 

