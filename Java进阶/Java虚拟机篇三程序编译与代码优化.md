# Java虚拟机篇三程序编译与代码优化

**禁止转载！！**

> 本篇是Java虚拟机的学习笔记的第三篇，程序编译与代码优化。
>
> 参考资料：深入理解Java虚拟机周志明第三版以及互联网资源具体引用会在文中标注
>
> 本文大部分都是从《深入理解Java虚拟机周志明第三版》进行拷贝和引用的，目的是为了学习一遍并加深印象，同时整理重要知识点方便日后进行复习。

# 一、前端编译与优化

## 1.1 概述

在Java技术下谈编译期而没有上下文的话是很含糊的表达，因为这可能指一个前端编译器把`*.java`转换成`*.class`文件的过程；也可能是指Java虚拟机的即时编译器，运行时把字节码转换成本地机器码的过程；也可能是使用静态的提前编译器，直接把程序编译成与目标机器指令集相关的二进制代码的过程，下面是代表性产品：

- 前端编译器：javac，Eclipse JDT的ECJ增量式编译器
- 即时编译器：HotSpot虚拟机的C1、C2编译器，Graal编译器
- 提前编译器：JDK的Jaotc，GNU Compiler for the Java（GCJ），Excelsior JET

一般来说Java虚拟机的设计团队选择把性能优化集中到运行期的即时编译器中，这样不仅可以让Javac产生的class文件，还可以让其它语言的如Groovy的class文件也同样享受到编译器优化带来的性能红利。 

## 1.2 Javac编译器

## 1.3 Java语法糖

# 二、后端编译与优化

## 2.1 概述

## 2.2 即时编译器

目前主流的两款商用Java虚拟机里，Java程序最初都是通过解释器解释执行的，当虚拟机发现某个方法或代码块运行特别频繁，就会将这些代码认定为热点代码，为了提高热点代码的执行效率，运行时虚拟机会将这些代码编译成本地机器码，并以各种手段进行代码优化，运行时完成这个任务的后端编译器叫做即时编译器。

## 2.3 提前编译器

## 2.4 编译器优化技术

优化技术概览

方法内联

逃逸分析

公共子表达式消除

数组边界检查消除